{% extends "base.html" %}
{% load static %}

{% block extra_head %}
<style>
</style>
<script>
var now = new Date();
var today = new Date(now.getFullYear(),now.getMonth(),now.getDate());
var formatDate = function(d)
{
  if(d!=undefined)
  {
    return d.getFullYear()+"-"+((d.getMonth()<9)?("0"+(d.getMonth()+1)):(d.getMonth()+1))+"-"+((d.getDate()<10)?("0"+d.getDate()):d.getDate());
  }
  else
  {
    return "";
  }
};
</script>
<script>
  $(function(){
    var tileApp = angular.module('tileAcceleratorApp', []);
    //$("body").attr('ng-app','tileAcceleratorApp');
    //$('#services').attr('ng-controller', 'ServicesController');
    //var tileApp = angular.module('tileAcceleratorApp', []);
    
    //$(function(){
    tileApp.controller('ServicesControllerAll', function($scope, $http) {
      $http.get(url_services)
        .success(function(response)
        {
          $scope.services = response;
        });
    });
    tileApp.controller('ServicesControllerYear', function($scope, $http) {
      $http.get(url_services)
        .success(function(response)
        {
          $scope.services = response;
        });
    });
    tileApp.controller('ServicesControllerMonth', function($scope, $http) {
      $http.get(url_services)
        .success(function(response)
        {
          $scope.services = response;
        });
    });
    tileApp.controller('ServicesControllerToday', function($scope, $http) {
      $scope.sDate = formatDate(today);
      $http.get(url_services)
        .success(function(response)
        {
          $scope.services = response;
        });
    });
    //});

    angular.bootstrap(document, ['tileAcceleratorApp']);

    //$('#services .nav-tabs a').click(function (e) {
    //  e.preventDefault();
    //  $(this).tab('show');
    //})
  });
</script>
{% endblock %}
{% block navbar_right %}
{% endblock %}
{% block content %}
  <div class="row">
    <div class="col-md-12">
      <div class="page-header" style="padding-left:10px;"><h3>Tile Services</h3></div>
   </div>
  </div>
  <div class="row">
    <div id="services" class="col-md-8">
      <ul class="nav nav-tabs" data-tabs="tabs">
        <li class="active"><a href="#today" aria-controls="today" data-toggle="tab"><i class=""></i>Today</a></li>
        <li class=""><a href="#all" aria-controls="all" data-toggle="tab"><i class=""></i>All-Time</a></li>
        <li class=""><a href="#year" aria-controls="year" data-toggle="tab"><i class=""></i>Year</a></li>
        <li class=""><a href="#month" aria-controls="month" data-toggle="tab"><i class=""></i>Month</a></li>
      </ul>
      <div class="tab-content">
        <div id="today" class="tab-pane active">
          <div>
            {% verbatim %}
            <div ng-controller="ServicesControllerToday">
              <table class="table table-striped table-bordered">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  <tr ng-repeat="service in services">
                    <td>{{ service.name }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
            {% endverbatim %}
          </div>
        </div>
        <div id="all" class="tab-pane">
          <div>
            {% verbatim %}
            <div ng-controller="ServicesControllerAll"> 
              <table class="table table-striped table-bordered">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  <tr ng-repeat="service in services">
                    <td>{{ service.name }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
            {% endverbatim %}
          </div>
        </div>
        <div id="year" class="tab-pane">
          <div>
            {% verbatim %}
            <div ng-controller="ServicesControllerYear">
              <table class="table table-striped table-bordered">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  <tr ng-repeat="service in services">
                    <td>{{ service.name }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
            {% endverbatim %}
          </div>
        </div>
        <div id="month" class="tab-pane">
          <div>
            {% verbatim %}
            <div ng-controller="ServicesControllerMonth">
              <table class="table table-striped table-bordered">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  <tr ng-repeat="service in services">
                    <td>{{ service.name }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
            {% endverbatim %}
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-4">{% include "commands.html" %}</div>
  </div>
<script>
  var service = {% if service %}"{{ service }}"{% else %}undefined{% endif %};
  var date = {% if date %}"{{ date }}"{% else %}undefined{% endif %};
  var url_services = "{% url 'services_json' %}";
  //////////////////////////////////
</script>
{% endblock %}
{% block footer %}
{% endblock %}
